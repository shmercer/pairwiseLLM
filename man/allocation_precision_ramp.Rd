% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/allocation_policies.R
\name{allocation_precision_ramp}
\alias{allocation_precision_ramp}
\title{Allocation policy: increase within-batch comparisons as precision improves}
\usage{
allocation_precision_ramp(
  step = 0.05,
  max_within = 0.8,
  metric = "rel_se_p90",
  min_improve = 0
)
}
\arguments{
\item{step}{Amount to increase \code{within_batch_frac} when improvement is
detected.}

\item{max_within}{Maximum allowed \code{within_batch_frac}.}

\item{metric}{Name of a column in \code{state$metrics} and \code{state$prev_metrics}
to use as the precision metric. Defaults to \code{"rel_se_p90"}.}

\item{min_improve}{Minimum required decrease in the metric to count as an
improvement.}
}
\value{
A function suitable for passing as \code{allocation_fun}.
}
\description{
Returns an \code{allocation_fun} that increases \code{within_batch_frac} by \code{step}
when the selected precision metric improves (decreases) compared to the
previous round.
}
\examples{
alloc <- allocation_precision_ramp(step = 0.2, max_within = 0.8)

# Improvement (metric decreases): within_batch_frac increases by step
state <- list(
  within_batch_frac = 0.1,
  core_audit_frac = 0.1,
  metrics = data.frame(rel_se_p90 = 0.50),
  prev_metrics = data.frame(rel_se_p90 = 0.80)
)
alloc(state)

# No improvement: returns NULL (no change)
state$prev_metrics <- data.frame(rel_se_p90 = 0.45)
alloc(state)

}
