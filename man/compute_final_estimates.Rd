% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_final_estimates.R
\name{compute_final_estimates}
\alias{compute_final_estimates}
\title{Compute final ranking estimates from pairwise results}
\usage{
compute_final_estimates(
  results,
  ids = NULL,
  bt_bias_reduction = TRUE,
  bt_verbose = FALSE,
  rc_smoothing = 0.5,
  rc_damping = 0,
  ...
)
}
\arguments{
\item{results}{A data frame with columns \code{ID1}, \code{ID2}, and
\code{better_id}. This is typically the \code{$results} output from an
adaptive run.}

\item{ids}{Optional character vector of all item IDs. If \code{NULL}
(default), IDs are inferred from \code{results}.}

\item{bt_bias_reduction}{Logical; attempt a bias-reduced Bradley--Terry fit
via \pkg{BradleyTerry2} when available (default \code{TRUE}). If the
bias-reduced fit fails, the function falls back to standard MLE.}

\item{bt_verbose}{Logical; if \code{TRUE}, allow model-fitting warnings to be
printed. If \code{FALSE} (default), suppress common fitting warnings.}

\item{rc_smoothing}{Numeric scalar \code{>= 0}. Passed to
\code{\link{fit_rank_centrality}}.}

\item{rc_damping}{Numeric scalar in \code{[0,1)}. Passed to
\code{\link{fit_rank_centrality}}.}

\item{...}{Additional arguments forwarded to \code{\link{fit_rank_centrality}}.}
}
\value{
A list with elements:
\describe{
\item{estimates}{A tibble with one row per \code{ID}, including:
\itemize{
\item \code{theta_bt}: Bradley--Terry ability estimate (centered)
\item \code{se_bt}: standard error for \code{theta_bt}
\item \code{rank_bt}: rank of \code{theta_bt} (1 = highest)
\item \code{pi_rc}: Rank Centrality stationary probability
\item \code{theta_rc}: centered \code{log(pi_rc)}
\item \code{rank_rc}: rank of \code{theta_rc} (1 = highest)
\item \code{wins}, \code{losses}, \code{ties}: counts from \code{results}
\item \code{n_appear}, \code{n_pos1}, \code{n_pos2}: appearance counts
\item \code{component_id}: connected-component label from Rank Centrality
}
}
\item{bt_fit}{The full Bradley--Terry fit object (list) as returned internally.}
\item{rc_fit}{The Rank Centrality fit list returned by \code{\link{fit_rank_centrality}}.}
\item{diagnostics}{A list of run-level diagnostics including whether bias
reduction was used and basic graph stats.}
}
}
\description{
This helper computes a comprehensive set of final ranking outputs from a
set of pairwise comparison results. It is intended for "end of run" use,
where the full set of comparisons is available.
}
\details{
The function fits:
\itemize{
\item A Bradley--Terry model via \pkg{BradleyTerry2}. If bias reduction is
enabled (default), the function attempts a bias-reduced fit (often called
"Firth" correction). If the bias-reduced fit is unavailable (e.g., missing
optional dependencies), the function falls back to a standard maximum
likelihood Bradley--Terry fit.
\item A Rank Centrality model (spectral / random-walk based) via
\code{\link{fit_rank_centrality}}.
}

In addition to model-based estimates, the returned table includes
graph-derived summaries such as win/loss/tie counts, appearance counts
(degree proxies), and connectivity diagnostics from Rank Centrality.
}
\examples{
data("example_writing_pairs")
out <- compute_final_estimates(example_writing_pairs)
out$estimates

}
