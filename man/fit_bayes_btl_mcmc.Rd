% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bayes_btl_mcmc.R
\name{fit_bayes_btl_mcmc}
\alias{fit_bayes_btl_mcmc}
\title{Full Bayesian BTL inference via CmdStanR (audit only)}
\usage{
fit_bayes_btl_mcmc(
  results,
  ids,
  cmdstan = list(chains = 4, iter_warmup = 1000, iter_sampling = 1000, seed = NULL,
    core_fraction = 0.6)
)
}
\arguments{
\item{results}{Canonical \code{results_tbl} with \code{A_id}, \code{B_id}, and
\code{better_id}.}

\item{ids}{Character vector of all sample ids (length \code{N}).}

\item{cmdstan}{List of CmdStan settings: \code{chains} (4),
\code{iter_warmup} (1000), \code{iter_sampling} (1000), \code{seed} (NULL),
and \code{core_fraction} (0.6). The list is extensible in future versions.}
}
\value{
A list with:
\describe{
\item{theta_draws}{Matrix of posterior draws \code{[S, N]} (colnames == ids).}
\item{fit_meta}{Sampling diagnostics and convergence metadata.}
}
}
\description{
Final Bayesian posterior inference for adaptive ranking. This requires
CmdStanR/CmdStan (optional dependency). All reported uncertainty summaries
are derived from these draws only.
}
\examples{
\dontrun{
results <- tibble::tibble(
  pair_uid = "A:B#1",
  unordered_key = "A:B",
  ordered_key = "A:B",
  A_id = "A",
  B_id = "B",
  better_id = "A",
  winner_pos = 1L,
  phase = "phase2",
  iter = 1L,
  received_at = as.POSIXct("2026-01-01 00:00:00", tz = "UTC"),
  backend = "openai",
  model = "gpt-test"
)
fit <- fit_bayes_btl_mcmc(results, ids = c("A", "B"))

# Full workflow shape (after stop confirmation):
# 1) Run MCMC
# 2) Summarize with MCMC-only helpers
mcmc_fit <- fit_bayes_btl_mcmc(results, ids = c("A", "B"))
theta_summary <- summarize_theta(mcmc_fit$theta_draws)
rank_summary <- summarize_ranks(mcmc_fit$theta_draws)
}


}
