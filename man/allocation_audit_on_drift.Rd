% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/allocation_policies.R
\name{allocation_audit_on_drift}
\alias{allocation_audit_on_drift}
\title{Allocation policy: increase core auditing when drift is high}
\usage{
allocation_audit_on_drift(
  drift_metric = "linking_max_abs_shift",
  drift_threshold = 0.2,
  step = 0.05,
  base_core_audit = 0.1,
  max_core_audit = 0.4
)
}
\arguments{
\item{drift_metric}{Name of the drift metric column in \code{state$metrics}.
Defaults to \code{"linking_max_abs_shift"}.}

\item{drift_threshold}{Threshold above which drift is considered high.}

\item{step}{Amount to adjust \code{core_audit_frac}.}

\item{base_core_audit}{Target (baseline) \code{core_audit_frac} when drift is low.}

\item{max_core_audit}{Maximum allowed \code{core_audit_frac}.}
}
\value{
A function suitable for passing as \code{allocation_fun}.
}
\description{
Returns an \code{allocation_fun} that increases \code{core_audit_frac} by \code{step} when
the selected drift metric exceeds \code{drift_threshold}, and otherwise moves
\code{core_audit_frac} back toward \code{base_core_audit} by \code{step}.
}
\examples{
alloc <- allocation_audit_on_drift(drift_threshold = 0.2, step = 0.05)

# High drift: core_audit_frac increases by step
state <- list(
  within_batch_frac = 0.2,
  core_audit_frac = 0.10,
  metrics = data.frame(linking_max_abs_shift = 0.30)
)
alloc(state)

# Low drift: core_audit_frac moves back toward baseline
state$core_audit_frac <- 0.25
state$metrics <- data.frame(linking_max_abs_shift = 0.05)
alloc(state)

}
