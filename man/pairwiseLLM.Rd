% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pairwiseLLM-package.R
\docType{package}
\name{pairwiseLLM}
\alias{pairwiseLLM-package}
\alias{pairwiseLLM}
\title{pairwiseLLM: Pairwise comparisons and adaptive ranking with LLM judges}
\description{
\code{pairwiseLLM} supports (1) constructing paired-comparison designs over items,
(2) collecting binary judgments from LLMs (live or via provider batch APIs),
and (3) fitting ranking models (Elo, Bradley–Terry) including an adaptive pairing
Bayesian BTL workflow.
}
\details{
\subsection{Typical workflow}{
\enumerate{
\item \strong{Load items} (the things you want to rank) using \code{\link[=read_samples_df]{read_samples_df()}} or
\code{\link[=read_samples_dir]{read_samples_dir()}}.
\item \strong{Create a pairing design} with \code{\link[=make_pairs]{make_pairs()}} / \code{\link[=sample_pairs]{sample_pairs()}} (and
optional reverse pairs via \code{\link[=sample_reverse_pairs]{sample_reverse_pairs()}}).
\item \strong{Build prompts} using \code{\link[=build_prompt]{build_prompt()}} and a template managed via
\code{\link[=list_prompt_templates]{list_prompt_templates()}}, \code{\link[=set_prompt_template]{set_prompt_template()}}, \code{\link[=get_prompt_template]{get_prompt_template()}},
\code{\link[=register_prompt_template]{register_prompt_template()}}, and \code{\link[=remove_prompt_template]{remove_prompt_template()}}.
\item \strong{Collect judgments}:
\itemize{
\item Live: \code{\link[=submit_llm_pairs]{submit_llm_pairs()}}, \code{\link[=submit_openai_pairs_live]{submit_openai_pairs_live()}},
\code{\link[=submit_anthropic_pairs_live]{submit_anthropic_pairs_live()}}, \code{\link[=submit_gemini_pairs_live]{submit_gemini_pairs_live()}},
\code{\link[=submit_ollama_pairs_live]{submit_ollama_pairs_live()}}, \code{\link[=submit_together_pairs_live]{submit_together_pairs_live()}}.
\item Batch: \code{\link[=run_openai_batch_pipeline]{run_openai_batch_pipeline()}}, \code{\link[=run_anthropic_batch_pipeline]{run_anthropic_batch_pipeline()}},
\code{\link[=run_gemini_batch_pipeline]{run_gemini_batch_pipeline()}}, plus provider helpers and parsers.
}
\item \strong{Assemble modeling data} with \code{\link[=build_bt_data]{build_bt_data()}} or \code{\link[=build_elo_data]{build_elo_data()}}.
\item \strong{Fit / summarize}:
\itemize{
\item Elo: \code{\link[=fit_elo_model]{fit_elo_model()}}
\item Bradley–Terry: \code{\link[=fit_bt_model]{fit_bt_model()}}
\item Bayesian BTL (MCMC): \code{\link[=fit_bayes_btl_mcmc]{fit_bayes_btl_mcmc()}}
\item Summaries: \code{\link[=summarize_bt_fit]{summarize_bt_fit()}}, \code{\link[=summarize_items]{summarize_items()}},
\code{\link[=summarize_iterations]{summarize_iterations()}}, \code{\link[=summarize_refits]{summarize_refits()}}
}
}
}

\subsection{Package organization}{

The exported functions are intended to be read as a set of modules:
\subsection{1) Samples / items}{
\itemize{
\item \code{\link[=read_samples_df]{read_samples_df()}}, \code{\link[=read_samples_dir]{read_samples_dir()}}
}
}

\subsection{2) Pair construction and ordering}{
\itemize{
\item \code{\link[=make_pairs]{make_pairs()}}, \code{\link[=sample_pairs]{sample_pairs()}}, \code{\link[=sample_reverse_pairs]{sample_reverse_pairs()}}
\item Order helpers: \code{\link[=randomize_pair_order]{randomize_pair_order()}}, \code{\link[=alternate_pair_order]{alternate_pair_order()}}
\item Consistency checks: \code{\link[=compute_reverse_consistency]{compute_reverse_consistency()}}
}
}

\subsection{3) Prompt templates}{
\itemize{
\item \code{\link[=build_prompt]{build_prompt()}}, \code{\link[=trait_description]{trait_description()}}
\item Template registry: \code{\link[=list_prompt_templates]{list_prompt_templates()}}, \code{\link[=get_prompt_template]{get_prompt_template()}},
\code{\link[=set_prompt_template]{set_prompt_template()}}, \code{\link[=register_prompt_template]{register_prompt_template()}},
\code{\link[=remove_prompt_template]{remove_prompt_template()}}
}
}

\subsection{4) LLM submission (live + batch)}{
\itemize{
\item Provider-agnostic: \code{\link[=submit_llm_pairs]{submit_llm_pairs()}}, \code{\link[=llm_compare_pair]{llm_compare_pair()}},
\code{\link[=llm_submit_pairs_batch]{llm_submit_pairs_batch()}}, \code{\link[=llm_submit_pairs_multi_batch]{llm_submit_pairs_multi_batch()}},
\code{\link[=llm_download_batch_results]{llm_download_batch_results()}}, \code{\link[=llm_resume_multi_batches]{llm_resume_multi_batches()}}
\item OpenAI batch: \code{\link[=run_openai_batch_pipeline]{run_openai_batch_pipeline()}}, \code{\link[=build_openai_batch_requests]{build_openai_batch_requests()}},
\code{\link[=openai_upload_batch_file]{openai_upload_batch_file()}}, \code{\link[=write_openai_batch_file]{write_openai_batch_file()}},
\code{\link[=openai_create_batch]{openai_create_batch()}}, \code{\link[=openai_get_batch]{openai_get_batch()}},
\code{\link[=openai_poll_batch_until_complete]{openai_poll_batch_until_complete()}}, \code{\link[=openai_download_batch_output]{openai_download_batch_output()}},
\code{\link[=parse_openai_batch_output]{parse_openai_batch_output()}}
\item Anthropic batch: \code{\link[=run_anthropic_batch_pipeline]{run_anthropic_batch_pipeline()}},
\code{\link[=build_anthropic_batch_requests]{build_anthropic_batch_requests()}}, \code{\link[=anthropic_create_batch]{anthropic_create_batch()}},
\code{\link[=anthropic_get_batch]{anthropic_get_batch()}}, \code{\link[=anthropic_poll_batch_until_complete]{anthropic_poll_batch_until_complete()}},
\code{\link[=anthropic_download_batch_results]{anthropic_download_batch_results()}}, \code{\link[=parse_anthropic_batch_output]{parse_anthropic_batch_output()}}
\item Gemini batch: \code{\link[=run_gemini_batch_pipeline]{run_gemini_batch_pipeline()}}, \code{\link[=build_gemini_batch_requests]{build_gemini_batch_requests()}},
\code{\link[=gemini_create_batch]{gemini_create_batch()}}, \code{\link[=gemini_get_batch]{gemini_get_batch()}},
\code{\link[=gemini_poll_batch_until_complete]{gemini_poll_batch_until_complete()}}, \code{\link[=gemini_download_batch_results]{gemini_download_batch_results()}},
\code{\link[=parse_gemini_batch_output]{parse_gemini_batch_output()}}
\item Live provider helpers: \code{\link[=openai_compare_pair_live]{openai_compare_pair_live()}},
\code{\link[=anthropic_compare_pair_live]{anthropic_compare_pair_live()}}, \code{\link[=gemini_compare_pair_live]{gemini_compare_pair_live()}},
\code{\link[=ollama_compare_pair_live]{ollama_compare_pair_live()}}, \code{\link[=together_compare_pair_live]{together_compare_pair_live()}}
}
}

\subsection{5) Modeling utilities and diagnostics}{
\itemize{
\item Data builders: \code{\link[=build_bt_data]{build_bt_data()}}, \code{\link[=build_elo_data]{build_elo_data()}}
\item Fits: \code{\link[=fit_bt_model]{fit_bt_model()}}, \code{\link[=fit_elo_model]{fit_elo_model()}}, \code{\link[=fit_bayes_btl_mcmc]{fit_bayes_btl_mcmc()}}
\item Diagnostics: \code{\link[=check_positional_bias]{check_positional_bias()}}
}
}

\subsection{6) Adaptive Bayesian pairing + ranking loop}{
\itemize{
\item Entry / control: \code{\link[=adaptive_rank_start]{adaptive_rank_start()}}, \code{\link[=adaptive_rank_run_batch]{adaptive_rank_run_batch()}},
\code{\link[=adaptive_rank_run_live]{adaptive_rank_run_live()}}, \code{\link[=adaptive_rank_resume]{adaptive_rank_resume()}}
}
}

}

\subsection{Design notes (adaptive Bayesian BTL)}{

The adaptive design targets stable, auditable rankings using Bayesian
Bradley–Terry–Luce inference with MCMC, supports position bias and lapse-rate
variants, and is intended to be robust for noisy LLM judges. The recommended
default model includes both global position bias and lapse rate.

The adaptive loop enforces hard invariants such as connectivity, duplicate
control with order reversal for repeated unordered pairs, and approximate
50/50 position balance across items.

Adaptive decision-making is gated on strict MCMC diagnostics.

When candidate generation is starved by constraints, the design specifies a
deterministic fallback ladder (expanding windows, alternative anchor pools,
controlled duplicate relaxation, and a global backstop).

Stopping and refits are logged so that stop decisions are reproducible from the
\code{round_log} fields (an explicit stop audit trail).
}
}
\seealso{
\itemize{
\item For interactive exploration: start with \code{\link[=adaptive_rank_run_live]{adaptive_rank_run_live()}} or
\code{\link[=run_openai_batch_pipeline]{run_openai_batch_pipeline()}}.
}
}
\author{
\strong{Maintainer}: Sterett H. Mercer \email{sterett.mercer@ubc.ca} (\href{https://orcid.org/0000-0002-7940-4221}{ORCID})

}
\keyword{internal}
