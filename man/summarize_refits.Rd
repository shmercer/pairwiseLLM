% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/btl_mcmc_summaries.R
\name{summarize_refits}
\alias{summarize_refits}
\title{Summarize adaptive refits}
\usage{
summarize_refits(state, last_n = NULL, include_optional = TRUE)
}
\arguments{
\item{state}{An \code{adaptive_state} or list containing adaptive logs.}

\item{last_n}{Optional positive integer; return only the last \code{n} rows.}

\item{include_optional}{Logical; include optional diagnostic columns.}
}
\value{
A tibble with one row per refit (canonical \code{round_log} schema).
}
\description{
Build a thin per-refit diagnostics summary from the adaptive round log. This is
a pure view over \code{round_log} and does not recompute posterior
quantities or stop metrics.
}
\details{
The round log is the canonical stop-audit trail. This summary is a direct
view over \code{round_log} with no recomputation.

Key fields include:
\itemize{
\item identity: \code{refit_id}, \code{round_id_at_refit},
\code{step_id_at_refit}
\item run scale: \code{total_pairs_done}, \code{new_pairs_since_last_refit},
\code{n_unique_pairs_seen}
\item candidate health: \code{proposed_pairs_mode},
\code{starve_rate_since_last_refit}, \code{fallback_rate_since_last_refit},
\code{fallback_used_mode}, \code{starvation_reason_mode}
\item diagnostics/stopping: \code{diagnostics_pass}, \code{divergences},
\code{max_rhat}, \code{min_ess_bulk}, \code{ess_bulk_required},
\code{reliability_EAP}, \code{rho_theta}, \code{delta_sd_theta},
\code{rho_rank}, \code{stop_decision}, \code{stop_reason}
\item report-only uncertainty metrics: \code{ci95_theta_width_*},
\code{near_tie_adj_*}, \code{cov_trace_theta},
\code{top20_boundary_entropy_*}, \code{nn_diff_sd_*}
}
}
\examples{
# These summaries work on either an adaptive_state or a plain list of logs.
logs <- list(
  round_log = tibble::tibble(
    refit_id = 1:2,
    round_id_at_refit = c(1L, 2L),
    step_id_at_refit = c(10L, 20L),
    new_pairs_since_last_refit = c(50L, 50L),
    total_pairs_done = c(50L, 100L),
    divergences = c(0L, 0L),
    max_rhat = c(1.01, 1.00),
    min_ess_bulk = c(800, 900),
    stop_decision = c(NA, TRUE),
    stop_reason = c(NA_character_, "btl_converged")
  )
)

# Full per-refit view:
summarize_refits(logs)

# Only the most recent refit row:
summarize_refits(logs, last_n = 1)

# Drop optional diagnostics if you want a compact core summary:
summarize_refits(logs, include_optional = FALSE)

}
