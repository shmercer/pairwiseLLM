% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/allocation_policies.R
\name{allocation_compose}
\alias{allocation_compose}
\title{Compose multiple allocation policies}
\usage{
allocation_compose(...)
}
\arguments{
\item{...}{One or more allocation functions (each a function or \code{NULL}).}
}
\value{
A function suitable for passing as \code{allocation_fun}.
}
\description{
Combines multiple \code{allocation_fun} functions into a single function.
}
\details{
The returned function calls each policy in order with the same \code{state}
object and merges their outputs. If multiple policies set the same
field (e.g., \code{within_batch_frac}), later policies take precedence.

This is useful when you want to combine, for example,
\code{\link[=allocation_precision_ramp]{allocation_precision_ramp()}} and \code{\link[=allocation_audit_on_drift]{allocation_audit_on_drift()}}.
}
\examples{
alloc <- allocation_compose(
  allocation_precision_ramp(step = 0.2, max_within = 0.8),
  allocation_audit_on_drift(drift_threshold = 0.2, step = 0.05)
)
state <- list(
  within_batch_frac = 0.1,
  core_audit_frac = 0.1,
  metrics = data.frame(rel_se_p90 = 0.5, linking_max_abs_shift = 0.3),
  prev_metrics = data.frame(rel_se_p90 = 0.8)
)
alloc(state)

}
