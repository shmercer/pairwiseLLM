% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bayes_btl_mcmc.R
\name{build_btl_results_data}
\alias{build_btl_results_data}
\title{Build canonical \code{results_tbl} data for Bayesian BTL MCMC}
\usage{
build_btl_results_data(
  results,
  phase = "phase2",
  backend = "non_adaptive_import",
  model = "unknown",
  iter_start = 1L,
  received_at_start = as.POSIXct("1970-01-01 00:00:00", tz = "UTC")
)
}
\arguments{
\item{results}{A data frame or tibble containing columns \code{ID1},
\code{ID2}, and \code{better_id}.}

\item{phase}{Length-1 phase label for all rows. Must be one of
\code{"phase1"}, \code{"phase2"}, or \code{"phase3"}. Defaults to
\code{"phase2"}.}

\item{backend}{Length-1 backend label to record in output metadata.}

\item{model}{Length-1 model label to record in output metadata.}

\item{iter_start}{Integer starting value for \code{iter}. Defaults to
\code{1L}.}

\item{received_at_start}{Length-1 \code{POSIXct} timestamp for the first
row. Subsequent rows increment by one second.}
}
\value{
A tibble in canonical \code{results_tbl} format with columns:
\code{pair_uid}, \code{unordered_key}, \code{ordered_key}, \code{A_id},
\code{B_id}, \code{better_id}, \code{winner_pos}, \code{phase},
\code{iter}, \code{received_at}, \code{backend}, \code{model}.
}
\description{
Converts non-adaptive pairwise outcomes (for example, rows like
\code{example_writing_pairs} with \code{ID1}, \code{ID2}, \code{better_id})
into the canonical \code{results_tbl} schema required by
\code{\link[=fit_bayes_btl_mcmc]{fit_bayes_btl_mcmc()}}.
}
\details{
The output is deterministic and schema-valid:
\itemize{
\item stable \code{unordered_key} / \code{ordered_key} values,
\item deterministic \code{pair_uid} as \code{"<unordered_key>#<occurrence>"},
\item deterministic \code{iter} and \code{received_at} sequences.
}
}
\examples{
data("example_writing_pairs", package = "pairwiseLLM")

results_tbl <- build_btl_results_data(example_writing_pairs)
head(results_tbl)

ids <- sort(unique(c(results_tbl$A_id, results_tbl$B_id)))
ids

}
