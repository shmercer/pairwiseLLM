% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bt_drift_metrics.R
\name{bt_drift_metrics}
\alias{bt_drift_metrics}
\title{Compute drift metrics between two theta estimates}
\usage{
bt_drift_metrics(
  current,
  previous,
  ids = NULL,
  prefix = "",
  abs_shift_probs = c(0.9, 0.95),
  methods = c("pearson", "spearman")
)
}
\arguments{
\item{current}{Current theta estimates.}

\item{previous}{Previous theta estimates.}

\item{ids}{Optional character vector of IDs to compute drift on (e.g., a core set).
If \code{NULL}, uses the intersection of IDs present in both inputs.}

\item{prefix}{Optional string prefix to apply to output column names.}

\item{abs_shift_probs}{Numeric vector of probabilities for absolute-shift quantiles.
Default \code{c(0.9, 0.95)}.}

\item{methods}{Character vector indicating which correlation(s) to compute.
Supported: \code{"pearson"}, \code{"spearman"}. Default both.}
}
\value{
A one-row tibble with drift summary columns, including:
\describe{
\item{\if{html}{\out{<prefix>}}n}{Number of items used for drift computation.}
\item{\if{html}{\out{<prefix>}}theta_cor}{Pearson correlation between current and previous theta (if requested).}
\item{\if{html}{\out{<prefix>}}theta_spearman}{Spearman correlation between current and previous theta (if requested).}
\item{\if{html}{\out{<prefix>}}mean_abs_shift}{Mean absolute shift in theta.}
\item{\if{html}{\out{<prefix>}}p90_abs_shift}{90th percentile absolute shift (if requested).}
\item{\if{html}{\out{<prefix>}}p95_abs_shift}{95th percentile absolute shift (if requested).}
\item{\if{html}{\out{<prefix>}}max_abs_shift}{Maximum absolute shift.}
\item{\if{html}{\out{<prefix>}}mean_signed_shift}{Mean signed shift (current - previous).}
}
}
\description{
This helper summarizes how a set of item scores (theta) has changed between two
model fits (e.g., across waves/batches when using a core linking set).
}
\details{
Inputs can be:
\itemize{
\item A list returned by \code{\link{fit_bt_model}} (uses \code{$theta}),
\item A tibble/data frame containing columns \code{ID} and \code{theta}, or
\item A named numeric vector of theta values.
}
}
\examples{
cur <- tibble::tibble(ID = c("A", "B", "C"), theta = c(0, 1, 2))
prev <- tibble::tibble(ID = c("A", "B", "C"), theta = c(0, 0.5, 2.5))
bt_drift_metrics(cur, prev, prefix = "core_")

}
