% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stability_metrics.R
\name{.stability_metrics}
\alias{.stability_metrics}
\title{Internal: compute stability metrics between successive theta estimates}
\usage{
.stability_metrics(
  prev_theta_tbl,
  curr_theta_tbl,
  topk = 50L,
  topk_ties = c("id", "random"),
  seed = NULL
)
}
\arguments{
\item{prev_theta_tbl}{Prior theta table with columns \code{ID} and \code{theta}.}

\item{curr_theta_tbl}{Current theta table with columns \code{ID} and \code{theta}.}

\item{topk}{Integer K for Top-K overlap.}

\item{topk_ties}{Character; tie-breaking for Top-K. \code{"id"} sorts by \verb{(theta desc, ID asc)}
and is deterministic. \code{"random"} uses a seed and randomizes within exact-theta ties.}

\item{seed}{Optional integer seed used only when \code{topk_ties = "random"}.}
}
\value{
One-row tibble with \code{n_matched}, \code{rms_theta_delta}, \code{topk_overlap},
and \code{rank_corr} (Spearman on ranks; NA if not enough matched IDs).
}
\description{
Computes scale-aligned stability summaries between a prior and current theta
table. Thetas are centered within matched IDs each call; if the correlation
between rounds is negative, the current thetas are sign-flipped before RMS and
Top-K calculations.
}
\keyword{internal}
